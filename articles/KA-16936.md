---
title: "AEM leitet den Benutzer zurück zu http, wenn er über SSL/TLS aufgerufen wird und den Lastenausgleich beendet | AEM"
description: Beschreibung
solution: Experience Manager
product: Experience Manager
applies-to: "Experience Manager"
keywords: "KCS"
resolution: Resolution
internal-notes: "Helpx Link: https://helpx.adobe.com/experience-manager/kb/AEM-redirecting-back-to-http-on-accessed-via-SSL-terminated-Load-Balancer.html"
bug: false
article-created-by: Emily Geary
article-created-date: "4/12/2021 6:21:34 PM"
article-published-by: Emily Geary
article-published-date: "4/12/2021 6:26:15 PM"
version-number: 1
article-number: KA-16936
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=684ec8e8-bb9b-eb11-b1ac-000d3a3680d8"
exl-id: 52e50c09-67f2-46a2-90a7-df769d76a0dd
source-git-commit: 0c3e421beca46d9fe1952b1f98538a50697216a0
workflow-type: tm+mt
source-wordcount: '341'
ht-degree: 1%

---

# AEM leitet den Benutzer zurück zu http, wenn er über SSL/TLS aufgerufen wird und den Lastenausgleich beendet | AEM

## Beschreibung


Beim Zugriff auf AEM über einen SSL beendeten Lastenausgleich (oder SSL-beendeten CDN) leitet AEM von HTTPS zurück zu HTTP.

SSL-Beendigung am Load Balancer bedeutet, dass die SSL-Zertifikate im Load Balancer installiert sind. Der Endbenutzer greift über auf die Site zu `https://`, und auf den Dispatcher/Webserver und AEM wird über das Backend mit `http://`.



<b>Ursache</b>

Verschiedene Lastverteiler senden verschiedene Header, um die Backend-Systeme darauf hinzuweisen, dass SSL vorgelagert beendet wird. Beispiel: [Amazon ELB verwendet die Kopfzeile &quot;X-Forwarded-Proto: https&quot;](https://docs.aws.amazon.com/elasticloadbalancing/latest/classic/x-forwarded-headers.html#x-forwarded-proto).


## Auflösung


So beheben Sie das Problem:

<b>I. Aktualisieren des Dispatchers `/clientheaders` Konfiguration</b>

In der Dokumentation zu Ihrem Lastverteiler erfahren Sie, welcher Header festgelegt wird, um nachgelagerte Systeme darüber zu informieren, dass SSL beendet wurde. Zur Einfachheit gehen wir bei diesen Schritten davon aus, dass der richtige HTTP-Header *`X-Forwarded-Proto: https`*

1. Melden Sie sich beim Dispatcher-Server an.
2. Öffnen Sie die Dispatcher-Farm `.any` Konfiguration.
3. Fügen Sie die Kopfzeile zum `/clientheaders` Abschnitt.


Wenn Sie Dispatcher ohne Lastenausgleich verwenden oder wenn Ihr Lastenausgleich oder Proxy die `X-Forwarded-Proto` -Kopfzeile erstellen, können Sie sie auf der Webserver- oder Dispatcher-Ebene festlegen. Wenn Sie [!DNL Apache HTTP Server]und aktualisieren Sie dann Ihren HTTPS VirtualHost mit dieser Anweisung:


| 1 | `RequestHeader ` `set` `X-Forwarded-Proto ` `"https"` |
| --- | --- |


<b>II. Aktualisieren Sie die Kopfzeilenkonfigurationen:</b>

1. Navigieren Sie zu *http://host:port*/system/console/configMgr/org.apache.felix.http.sslfilter.SslFilter und melden Sie sich als Administrator an.
2. SSL-Weiterleitungs-Kopfzeile festlegen auf `X-Forwarded-Proto`.
3. Setzen Sie den SSL-Weiterleitungswert auf HTTPS.
4. Klicken Sie auf Speichern.


Hinweis:

Es gibt keinen Standard für Reverse-Proxy-Header, die dem Backend mitteilen, welches Protokoll verwendet wird. Hier sind jedoch einige bekannte:

- Amazon ELB ([!DNL Elastic Load Balancer]) verwendet die `X-Forwarded-Proto: https` -Kopfzeile.
- [!DNL Amazon Cloudfront] CDN-Nutzung `X-Cloudfront-Proto: https` -Kopfzeile.


<b>III. Jetty-OSGi-Konfiguration aktualisieren (AEM 6.3 und neuere Versionen)</b>

Für AEM 6.3 und neuere Versionen ist eine zusätzliche Konfiguration erforderlich:

- Melden Sie sich bei http://aem-host:port/system/console/configMgr/org.apache.felix.http an.
- Aktivieren Sie die Einstellung . <b>Proxy-/Load-Balancer-Verbindung aktivieren</b>und speichern Sie sie.
