---
title: "AEM leitet den Benutzer zurück zu http, wenn er über SSL/TLS aufgerufen wird und den Lastenausgleich beendet | AEM"
description: Beschreibung
solution: Experience Manager
product: Experience Manager
applies-to: "Experience Manager"
keywords: "KCS"
resolution: Resolution
internal-notes: "Helpx Link: https://helpx.adobe.com/experience-manager/kb/AEM-redirecting-back-to-http-on-accessed-via-SSL-terminated-Load-Balancer.html"
bug: false
article-created-by: Emily Geary
article-created-date: "4/12/2021 6:21:34 PM"
article-published-by: Emily Geary
article-published-date: "4/12/2021 6:26:15 PM"
version-number: 1
article-number: KA-16936
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=684ec8e8-bb9b-eb11-b1ac-000d3a3680d8"
exl-id: 52e50c09-67f2-46a2-90a7-df769d76a0dd
source-git-commit: e8f4ca2dd578944d4fe399074fab461de88ad247
workflow-type: tm+mt
source-wordcount: '362'
ht-degree: 1%

---

# AEM leitet den Benutzer zurück zu http, wenn er über SSL/TLS aufgerufen wird und den Lastenausgleich beendet | AEM

## Beschreibung


Beim Zugriff auf AEM über einen SSL beendeten Lastenausgleich (oder SSL-beendeten CDN) leitet AEM von HTTPS zurück zu HTTP.

SSL-Beendigung am Load Balancer bedeutet, dass die SSL-Zertifikate im Load Balancer installiert sind. Der Endbenutzer greift über https:// auf die Site zu und der Dispatcher/Webserver und AEM werden über das Backend mit http:// aufgerufen.



<b>Ursache</b>

Verschiedene Lastverteiler senden verschiedene Header, um die Backend-Systeme darauf hinzuweisen, dass SSL vorgelagert beendet wird. Beispiel: [Amazon ELB verwendet die Kopfzeile &quot;X-Forwarded-Proto: https&quot;](https://docs.aws.amazon.com/elasticloadbalancing/latest/classic/x-forwarded-headers.html#x-forwarded-proto).


## Auflösung


&#x200B; &#x200B; &#x200B; &#x200B; &#x200B; Beheben des Problems:

<b>I. Aktualisieren der Dispatcher-/clientheaders-Konfiguration</b>

In der Dokumentation zu Ihrem Lastverteiler erfahren Sie, welcher Header festgelegt wird, um nachgelagerte Systeme darüber zu informieren, dass SSL beendet wurde. Zur Vereinfachung gehen wir bei diesen Schritten davon aus, dass der richtige HTTP-Header &quot;*X-Forwarded-Proto: https*&quot;

1. Melden Sie sich beim Dispatcher-Server an.
2. Öffnen Sie die Konfiguration der Dispatcher-Farm .any .
3. Fügen Sie die Kopfzeile zum Abschnitt /clientheaders hinzu.


Wenn Sie Dispatcher ohne Lastenausgleich verwenden oder wenn Ihr Lastenausgleich oder Proxy die X-Forwarded-Proto-Kopfzeile nicht festlegen kann, können Sie sie auf Webserver- oder Dispatcher-Ebene festlegen. Wenn Sie Apache HTTP Server verwenden, aktualisieren Sie Ihren HTTPS VirtualHost mit dieser Anweisung:


| 1 | `RequestHeader ` `set` `X-Forwarded-Proto ` `"https"` |
| --- | --- |


<b>II. Aktualisieren Sie die Kopfzeilenkonfigurationen:</b>

1. Navigieren Sie zu *http://host:port*/system/console/configMgr/org.apache.felix.http.sslfilter.SslFilter und melden Sie sich als Administrator an.
2. Setzen Sie den SSL-Weiterleitungs-Header auf X-Forwarded-Proto.
3. Setzen Sie den SSL-Weiterleitungswert auf HTTPS.
4. Klicken Sie auf Speichern.


Hinweis:

Es gibt keinen Standard für Reverse-Proxy-Header, die dem Backend mitteilen, welches Protokoll verwendet wird. Hier sind jedoch einige bekannte:

- Amazon ELB (Elastic Load Balancer) verwendet den &quot;X-Forwarded-Proto: Kopfzeile &quot;https&quot;.
- Amazon Cloudfront CDN verwendet &quot;X-Cloudfront-proto: Kopfzeile &quot;https&quot;.


<b>III. Jetty-OSGi-Konfiguration aktualisieren (AEM 6.3 und neuere Versionen)</b>

Für AEM 6.3 und neuere Versionen ist eine zusätzliche Konfiguration erforderlich:

- Melden Sie sich bei http://aem-host:port/system/console/configMgr/org.apache.felix.http an.
- Aktivieren Sie die Einstellung . <b>Proxy-/Load-Balancer-Verbindung aktivieren</b>und speichern Sie sie.
