---
title: "Klonen einer TarMK-Instanz in AEM"
description: Beschreibung
solution: Experience Manager
product: Experience Manager
applies-to: "Experience Manager"
keywords: "KCS"
resolution: Resolution
internal-notes: "From https://helpx.adobe.com/experience-manager/kb/how-to-clone-an-AEM-TarMK-instance-AEM.html"
bug: false
article-created-by: Emily Geary
article-created-date: "3/24/2021 11:36:07 PM"
article-published-by: Emily Geary
article-published-date: "3/24/2021 11:37:50 PM"
version-number: 2
article-number: KA-16875
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=371b76b1-f98c-eb11-a812-000d3a58b9d1"
exl-id: d9c35199-775f-4f24-8d30-3828bb11e7f6
source-git-commit: a59847e2e7e37f432cb01150b9444cd9dbf585df
workflow-type: tm+mt
source-wordcount: '186'
ht-degree: 3%

---

# Klonen einer TarMK-Instanz in AEM

## Beschreibung

In diesem Artikel wird erläutert, wie Sie eine AEM-Instanz, die TarMK (oder TarMK + FileDataStore) für den Speicher verwendet, ordnungsgemäß klonen können.

## Auflösung

Die folgenden Schritte zeigen, wie Sie eine AEM + TarMK + FileDataStore-Instanz mit rsync auf kopieren [!DNL Linux] mit AEM installiert unter `/mnt/aem/author`.

1. Kopieren Sie die vollständige AEM-Instanz mithilfe eines Befehls wie rsync auf einen anderen Server, während sie ausgeführt wird. Achten Sie darauf, die Zeitstempel während des Kopiervorgangs beizubehalten und den Protokollordner und den Datenspeicher auszuschließen. Beispiel:

   ```
   rsync -av --exclude 'crx-quickstart/logs' --exclude 'crx-quickstart/repository/repository/datastore' /mnt/aem/author user@dest-host:/mnt/aem/
   ```

1. AEM beenden

1. Initiieren Sie eine weitere Kopie des TarMK-Segmentspeicherordners, um neue Änderungen seit der ersten Kopie zu erhalten:

   ```
   rsync -av /mnt/aem/author/crx-quickstart/repository/segmentstore/* user@dest-host:/mnt/aem/author/crx-quickstart/repository/segmentstore/
   ```

1. Starten Sie AEM.

1. Kopieren Sie den Datenspeicher, während AEM ausgeführt wird. Beispiel: `rsync -av /mnt/aem/author user@dest-host:/mnt/aem/crx-quickstart/repository/repository/datastore /mnt/aem/crx-quickstart/repository/repository/`

1. Erstellen Sie auf dem Zielserver den Protokollordner neu und löschen Sie die `crx-quickstart/repository/index` und löschen Sie die Datei sling.id.file aus dem `crx-quickstart/launchpad/felix` Ordner.

   ```
   mkdir /mnt/aem/crx-quickstart/logs
   rm -rf /mnt/aem/crx-quickstart/repository/index
   find /mnt/aem/crx-quickstart/launchpad/felix -type f -name "sling.id.file" -exec rm -f {} \; -print
   ```

1. Starten Sie auf dem Zielserver AEM und testen Sie Ihre Instanz.

<b>Wichtiger Hinweis:</b>

Sie müssen sicherstellen, dass der Datenspeicher nach dem Ordner &quot;segmentstore&quot;kopiert wird und dass alle Zeitstempel während der Kopie beibehalten werden.  Rsync ermöglicht die Beibehaltung von Zeitstempeln mit der Option -a .
