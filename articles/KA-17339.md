---
title: "Problemumgehung und Behebung von Indexbeschädigungen mit AEM/AEM Forms"
description: Beschreibung
solution: Experience Manager
product: Experience Manager
applies-to: "Experience Manager Forms"
keywords: "KCS,AEM Forms, RDBMK, Indexkorruption"
resolution: Resolution
internal-notes: null
bug: false
article-created-by: Prashant Khulbe
article-created-date: "9/21/2021 5:42:02 PM"
article-published-by: Prashant Khulbe
article-published-date: "9/21/2021 5:44:38 PM"
version-number: 2
article-number: KA-17339
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=13171039-031b-ec11-b6e6-000d3a34dd41"
exl-id: c34edd25-f77c-4ea4-82fc-5dbd16e8e946
source-git-commit: e8f4ca2dd578944d4fe399074fab461de88ad247
workflow-type: tm+mt
source-wordcount: '309'
ht-degree: 1%

---

# Beheben von Indexbeschädigung in AEM/AEM Forms

## Beschreibung

<br><br><br>Eine Beschädigung eines Index sollte ein sehr ungewöhnlicher Fall sein, da viel Arbeit in die Wege geleitet wurde, um dies zu vermeiden. Sollte dies jedoch passieren, würden Sie ähnliche Protokollberechtigungen für Folgendes sehen:<br><br>`17.01.2019 17:55:47.374 *WARN* pool-118-thread-4 org.apache.jackrabbit.oak.plugins.index.AsyncIndexUpdate async The index update failed``org.apache.jackrabbit.oak.api.CommitFailedException: OakMerge0001: OakMerge0001: Failed to merge changes to the underlying store (retries 5, 5169 ms)``at org.apache.jackrabbit.oak.spi.state.AbstractNodeStoreBranch.merge0(AbstractNodeStoreBranch.java:345)``at org.apache.jackrabbit.oak.plugins.document.DocumentNodeStoreBranch.merge(DocumentNodeStoreBranch.java:156)``at org.apache.jackrabbit.oak.plugins.document.DocumentRootBuilder.merge(DocumentRootBuilder.java:160)``at org.apache.jackrabbit.oak.plugins.document.DocumentNodeStore.merge(DocumentNodeStore.java:1588)``at org.apache.jackrabbit.oak.plugins.index.AsyncIndexUpdate.mergeWithConcurrencyCheck(AsyncIndexUpdate.java:581)``at org.apache.jackrabbit.oak.plugins.index.AsyncIndexUpdate.updateIndex(AsyncIndexUpdate.java:525)``at org.apache.jackrabbit.oak.plugins.index.AsyncIndexUpdate.runWhenPermitted(AsyncIndexUpdate.java:431)``at org.apache.jackrabbit.oak.plugins.index.AsyncIndexUpdate.run(AsyncIndexUpdate.java:323)``at org.apache.sling.commons.scheduler.impl.QuartzJobExecutor.execute(QuartzJobExecutor.java:115)``at org.quartz.core.JobRunShell.run(JobRunShell.java:202)``at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1164)``at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:634)`

## Auflösung


Wenn Sie sich dieser Situation stellen, ist der wahrscheinlich schnellste Weg, dieses Problem zu lösen, indem Sie die im Repository enthaltenen Indexdaten löschen und den beschädigten Index neu indizieren

HINWEIS: Neuindizierung ist eine zeitaufwendige und ressourcenintensive Aktion

Für diese Beispiele verwenden wir den Index &quot;workflowDataLucene&quot;.

<b>Indexdaten löschen: </b>

Die Indexdaten befinden sich im Repository unter /oak:index/workflowDataLucene als ausgeblendete Knoten. Um den beschädigten Index zu löschen, müssen Sie daher

1. Indexdefinition (nur) an einen neuen Speicherort kopieren
2. Löschen Sie die gesamte Knotenstruktur /oak:index/workflowDataLucene .
3. rekonstruieren /oak:index/workflowDataLucene und tirgger reindex


<b>Problemumgehung:</b>

Sie können den Index nicht löschen, sondern deaktivieren und einen neuen Index mit derselben Definition erstellen

1. Erstellen Sie einen neuen Index mit derselben Indexdefinition wie die beschädigte
2. Neuindizierung des Triggers auf dem neuen Index
3. Deaktivieren Sie den beschädigten Index, indem Sie die Eigenschaft type in &quot;disabled&quot;ändern.


Sobald diese Änderungen vorgenommen wurden, wird jede Abfrage an den neuen Index gesendet

<b>Löschen Sie die Daten aus der RDB:</b>

Als letztes Mittel und wenn Sie auf RDBmk laufen, können Sie analysieren, um die Indexdaten direkt aus der Datenbank zu löschen, mit einer Abfrage ähnlich der:

`DELETE` `FROM` `NODES``WHERE`
`ID =``'2:/oak:index/workflowDataLucene'` `OR``ID``LIKE` `'3:/oak:index/workflowDataLucene/%'` `OR``ID``LIKE` `'4:/oak:index/workflowDataLucene/%'` `OR``ID``LIKE` `'5:/oak:index/workflowDataLucene/%'` `OR``ID``LIKE` `'6:/oak:index/workflowDataLucene/%'` `OR``ID``LIKE` `'7:/oak:index/workflowDataLucene/%'` `OR``ID``LIKE` `'8:/oak:index/workflowDataLucene/%'` `OR``ID``LIKE` `'9:/oak:index/workflowDataLucene/%'` `OR``ID``LIKE` `'10:/oak:index/workflowDataLucene/%'` `OR`` ` <br><br>`ID``LIKE` `'5:p/oak:index/workflowDataLucene/%'` `OR``ID``LIKE` `'6:p/oak:index/workflowDataLucene/%'` `OR``ID``LIKE` `'7:p/oak:index/workflowDataLucene/%'` `OR``ID``LIKE` `'8:p/oak:index/workflowDataLucene/%'` `OR``ID``LIKE` `'9:p/oak:index/workflowDataLucene/%'` `OR``ID``LIKE` `'10:p/oak:index/workflowDataLucene/%'` `OR``ID``LIKE` `'11:p/oak:index/workflowDataLucene/%'` `OR``ID``LIKE` `'12:p/oak:index/workflowDataLucene/%'` `OR`<br><br> <br><br><br>
Wenn Sie diesen Pfad verwenden möchten, überprüfen Sie die Abfrage, bevor Sie sie ausführen, da möglicherweise einige Änderungen erforderlich sind

<b>HINWEIS:</b> AEM müssen heruntergefahren und lokale persistente Cache- und Indexdateien (crx-quickstart/repository/cache und crx-quickstart/repository/index) gelöscht werden, bevor AEM nach diesem Löschen gestartet werden.


|   |
| --- |
