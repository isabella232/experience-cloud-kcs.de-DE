---
title: "Neuindizieren eines synchronen AEM Index | AEM, Oak"
description: Beschreibung
solution: Experience Manager
product: Experience Manager
applies-to: "Experience Manager"
keywords: "KCS"
resolution: Resolution
internal-notes: "Helpx Link: helpx.adobe.com/experience-manager/kb/how-to-reindex-a-synchronous-AEM-index-AEM-Oak.html"
bug: false
article-created-by: Emily Geary
article-created-date: "3/17/2021 9:19:48 PM"
article-published-by: Emily Geary
article-published-date: "3/17/2021 9:21:41 PM"
version-number: 2
article-number: KA-16460
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=3613fb7d-6687-eb11-a812-000d3a593216"
exl-id: 1209609f-84a9-4810-b7c8-1193b09f82d7
source-git-commit: 0c3e421beca46d9fe1952b1f98538a50697216a0
workflow-type: tm+mt
source-wordcount: '412'
ht-degree: 0%

---

# Neuindizieren eines synchronen AEM Index | AEM, Oak

## Beschreibung


Wie indiziere ich einen synchronen Oak-Index ordnungsgemäß neu, ohne Ausfallzeiten zu verursachen?


## Auflösung


Die Neuindizierung eines synchronen Index durch einfaches Festlegen der reindex-Eigenschaft auf &quot;true&quot;führt zu einem synchronen Vorgang, der dazu führen kann, dass eine Oak-Instanz hängen bleibt. Um dies zu vermeiden, senden Sie eine Indizierung an einen Hintergrund-Thread.  Gehen Sie dazu wie folgt vor:

<b>Schritt 1:</b> Neuindizieren in einem Hintergrund-Thread

1. Legen Sie die folgenden Eigenschaften aus der CRXDE Lite in der Indexdefinition fest, damit der Eigenschaftenindex für die asynchrone Indizierung aktiviert werden kann: `/oak:index/property` index

   `reindex=true`

   `reindex-async=true`
2. Um zu überprüfen, ob der obige Knoten aktualisiert, `async="async-reindex"` festgelegt werden.
3. Rufen Sie die `startPropertyIndexAsyncReindex` auf `PropertyIndexAsyncReindex` MBean. Dadurch würde der Hintergrundauftrag gestartet, der nach solchen Indextypen suchen würde. Nach dem Aufruf sollte eine Protokollzeile angezeigt werden. Eine Neuindizierung wird durchgeführt ...
4. Sobald die Neuindizierung abgeschlossen ist, wird die Neuindizierungskennzeichnung auf &quot;false&quot;zurückgesetzt.
5. Führen Sie Schritt 3 erneut aus, um den Index in einen Synchronisierungsindex zurückzusetzen. Wenn das asynchrone Flag nicht gelöscht wird, muss das MBean möglicherweise mehrmals aufgerufen werden (dies kann vorkommen, wenn Änderungen gleichzeitig diesen Index betreffen).



*Hinweis:* Nur die `async="async-reindex"` wird entfernt, da dieser steuert, auf welchem Thread die Indizierung erfolgen soll.  Die `reindex-async` -Eigenschaft ist nur ein Konfigurationsflag, das sich nicht automatisch ändert. Die Idee ist, dass Sie sie einmal für die spezifischen Indexdefinitionen festlegen, die alle zukünftigen Neuindizierungen steuern. Dann wird erwartet, dass es dort bleibt und dann nicht wieder angefasst werden muss.


<b>Schritt 2:</b> Entfernen Sie den Neuindizierungs-Checkpoint (nur AEM 6.2 und ältere Versionen).

Während des Prozesses der asynchronen Neuindizierung wird ein Repository-Checkpoint erstellt. Nachdem die Indizierungsaufgabe abgeschlossen ist, muss sie wie unten beschrieben freigegeben werden, um eine reibungslose Revisionsbereinigung später zu gewährleisten:

1. Öffnen Sie zunächst das MBean CheckpointManager :

   MongoMK - [/system/console/jmx/org.apache.jackrabbit.oak%3Aname%3DDocument+node+store+checkpoint+management%2Ctype%3DCheckpointManager](http://localhost:4502/system/console/jmx/org.apache.jackrabbit.oak%3Aname%3DDocument+node+store+checkpoint+management%2Ctype%3DCheckpointManger)

   TarMK - [/system/console/jmx/org.apache.jackrabbit.oak%3Aname%3DSegment+node+store+checkpoint+management%2Ctype%3DCheckpointManager](http://localhost:4502/system/console/jmx/org.apache.jackrabbit.oak%3Aname%3DSegment+node+store+checkpoint+management%2Ctype%3DCheckpointManger)
2. Rufen Sie die `listCheckpoints()` operation
3. Suchen Sie die Checkpoint-Zeile mit der `name=async-reindex` -Eigenschaft.
4. Kopieren Sie den ID-Wert in die Zwischenablage.

   Auf MongoMK sieht es in etwa so aus: `r1234567aaaa-0-1`

   Auf TarMK sieht es in etwa wie folgt aus: `6eac07d0-fe27-4d16-82f8-6d5da4cefd67`
5. Öffnen Sie dann die `releaseCheckpoint()` Vorgang.
6. Fügen Sie die kopierte ID als p1 ein und klicken Sie auf &quot;Aufrufen&quot;.
7. Mit diesem Schritt wird der Checkpoint freigegeben.
