---
title: "Wie blockiere ich IP-Adressen auf Apache HTTP Server-Ebene?"
description: Beschreibung
solution: Experience Manager
product: Experience Manager
applies-to: "Experience Manager"
keywords: "KCS"
resolution: Resolution
internal-notes: "Helpx Link: https://helpx.adobe.com/experience-manager/kb/block-ips-apache-http-server.html#remoteip_module"
bug: false
article-created-by: Emily Geary
article-created-date: "3/17/2021 8:45:08 PM"
article-published-by: Emily Geary
article-published-date: "3/17/2021 8:50:48 PM"
version-number: 8
article-number: KA-16446
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=ad7893a3-6187-eb11-a812-000d3a593216"
exl-id: 70b66160-438a-4af1-9622-1e1d508cff2f
source-git-commit: e8f4ca2dd578944d4fe399074fab461de88ad247
workflow-type: tm+mt
source-wordcount: '226'
ht-degree: 1%

---

# Wie kann ich IP-Adressen auf der Apache HTTP Server-Ebene sperren?

## Beschreibung


Auf unserer Site kommt es zu einem Denial-of-Service-Angriff, Spam oder einem Hash. Wie werden IP-Adressen auf der Ebene des Apache HTTP Servers (AEM Dispatcher) blockiert?


## Auflösung


Die meisten Web Application Firewalls (WAF), wie z. B. Mod Security, können Blockierungslisten von IP-Adressen. Wenn Sie jedoch Apache HTTP Server ausführen und IPs blockieren möchten, führen Sie die folgenden Schritte aus:

1. Erstellen Sie auf Ihrem Server eine Datei mit dem Namen &quot;block-offending-ips.conf&quot;.
2. Öffnen Sie die Datei in einem Editor und fügen Sie eine Location-Direktive hinzu, die alle verletzenden IPs daran hindert, auf die URLs zuzugreifen, die Sie blockieren möchten.  Es gibt zwei Optionen für den Inhalt der Datei unten
   1. Wenn die Anfrage (über CDN, Load Balancer usw.) bereitgestellt wird und sich die IP des Remote-Benutzers nur in einer Kopfzeile wie X-Forwarded-For befindet, kann diese Konfiguration verwendet werden.  Beachten Sie, dass diese Konfiguration nicht gilt, wenn das remoteip_module konfiguriert ist.  `LocationMatch ``"/.*"````Order Allow,Deny``Allow from all``SetEnvif X-Forwarded-For ``"10\.42\.137\.123"` `DenyAccess``SetEnvif X-Forwarded-For ``"122\.6\.218\.101"` `DenyAccess&#39;``#Repeat the "SetEnvlf X-Forwarded-For ..." for each IP you want to block``Ablehnen von ``env``=DenyAccess&quot;/LocationMatch&quot;
   2. Wenn der Remote-Benutzer direkt auf Apache zugreift oder Sie das remoteip_module (siehe 1) verwenden, um es in Apache zu extrahieren und festzulegen, können Sie alternativ die Require-Funktion von mod_authz_core (Apache 2.4) direkt verwenden.


      `LocationMatch "/.*"`


      `RequireAll`


      `Require all granted`


      `Require not ip 10.42.137.123`


      `Require not ip 122.6.218.101`


      `#Repeat the "Require not ip ..." for each IP you want to block`


      `/RequireAll`


      `/LocationMatch`


      `1`


      `# Extract true client IP from header added by load balancer/CDN`


      `IfModule remoteip_module`


      `    # valid for ELB or ELB+CloudFront`


      `    RemoteIPHeader X-Forwarded-For`


      `/IfModule`
3. Legen Sie die Datei block-offending-ips.conf im Ordner /etc/conf.d des Apache-Webservers ab.
4. Starten Sie den Apache-HTTP-Server neu.
