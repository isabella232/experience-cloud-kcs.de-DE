---
title: "Implementieren von Video Analytics in Adobe Launch"
description: Beschreibung
solution: Customer Journey Analytics,Analytics
product: Customer Journey Analytics,Analytics
applies-to: "Customer Journey Analytics,Analytics"
keywords: "KCS Launch Video Analytics Heartbeat"
resolution: Resolution
internal-notes: "This implementation discussed in this article does not use Adobe Launch extension for Media Analytics."
bug: false
article-created-by: Krunal Oza
article-created-date: "9/16/2022 9:07:03 AM"
article-published-by: Krunal Oza
article-published-date: "9/16/2022 9:25:26 AM"
version-number: 3
article-number: KA-15023
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=ee0b6fe9-9e35-ed11-9db1-002248086a9c"
source-git-commit: e8f4ca2dd578944d4fe399074fab461de88ad247
workflow-type: tm+mt
source-wordcount: '1055'
ht-degree: 0%

---

# Implementieren von Video Analytics in Adobe Launch

## Beschreibung

<br>Umgebung<br><br>


Dieser Artikel enthält Schritte zur Implementierung des YouTube-Video-Trackings in Adobe Launch mit dem Media Heartbeat SDK.


<br><br>Problem/Symptome<br><br>
<b>Voraussetzungen</b>


| <ol>   <li>Sie verfügen über eine aktive Adobe Launch-Implementierung.</li>   <li>Die Report Suite ist für die Mediensammlung aktiviert.</li>   <li>Die Report Suite wird der korrekten Analytics-Unternehmensanmeldung in Adobe Experience Cloud zugeordnet.</li>   <li>Sie haben Veröffentlichungsrechte in Adobe Launch.</li>   <li>Sie kennen die Benutzeroberfläche von Adobe Launch und deren Funktionsweise.</li>  </ol><br> |
| --- |



## Auflösung


<b>SCHRITT 1: Neue Regel erstellen</b>

Erstellen Sie eine neue Regel in Ihrer Adobe Launch-Eigenschaft, indem Sie unter der Registerkarte &quot;Regeln&quot;auf die Schaltfläche &quot;Regel hinzufügen&quot;klicken. Diese Regel enthält die Ereignisbedingung zum Laden des YouTube-Videos und der Video Analytics- und YouTube iFrame-API-Skripte.

- Geben Sie den Regelnamen im Textfeld Name an.




<b>SCHRITT 2: Hinzufügen von Ereignissen und/oder Bedingungen</b>

Klicken Sie auf die Schaltfläche + unter Ereignis und Bedingungen , um Bedingungen zum Starten des YouTube-Videos zu erstellen. In meinem Beispiel habe ich die Bedingung &quot;Element Exists&quot;hinzugefügt, um nach einem bestimmten div-&quot;player&quot;zu suchen, mit dem das YouTube-Video gestartet werden kann.



<b>SCHRITT 3: Aktionen hinzufügen - Konfigurationsvariablen</b>

Klicken Sie unter &quot;Aktionen&quot;auf die Schaltfläche + , um ein neues Aktionselement zu erstellen. Dies dient als zentraler Konfigurationspunkt für die Einrichtung von Video Analytics-Variablen. Ich habe einige hartcodierte Werte verwendet. Sie können jedoch Datenelemente verwenden, um diese Variablen zu füllen.

1. Wählen Sie &quot;Core&quot;aus der Dropdown-Liste Erweiterung aus.
2. Wählen Sie &quot;Benutzerspezifischer Code&quot;aus der Dropdown-Liste Aktionstyp aus.
3. Fügen Sie im Textfeld &quot;Name&quot;einen Aktionsnamen hinzu.
4. Wählen Sie &quot;Javascript&quot;unter &quot;Sprache&quot;.
5. Aktivieren Sie &quot;Global ausführen&quot;.
6. Klicken Sie auf &quot;Editor öffnen&quot;.
7. Fügen Sie den Code hinzu und klicken Sie auf &quot;Speichern&quot;. Stellen Sie sicher, dass Sie die Werte gemäß Ihrem Unternehmen und Ihrer Report Suite aktualisieren.



```
(function() {    'use strict';
    // Export symbols.
    window.Configuration = {
        PLAYER: {
            NAME: 'sample player name'
            //VIDEO_ID: 'sample video id',
           //VIDEO_NAME: sample video name'
        },
        VISITOR: {
            MARKETING_CLOUD_ORG_ID: 'experience cloud ID',
            TRACKING_SERVER: 'tracking server',
            DPID: '',
            DPUUID: ''
        },
        APP_MEASUREMENT: {
            RSID: 'report suite id',
            TRACKING_SERVER: 'tracking server',
            PAGE_NAME: 'page name',
            CHAR_SET: 'UTF-8'
        },
        HEARTBEAT: {
            TRACKING_SERVER: 'heartbeat tracking server',
            PUBLISHER: 'publisher id',
            CHANNEL: 'channel',
            OVP: 'ovp name',
            SDK: 'sgk version',
       SSL: 'false',
       DEBUG: 'true'
        }
    };
})();
```


(function() { &#39;use strict&#39;;     // Exportieren Sie Symbole.
    window.Configuration = { PLAYER: { NAME: &#39;sample player name&#39; //VIDEO_ID: &#39;sample video id&#39;, //VIDEO_NAME: Beispiel-Videoname&#39; }, VISITOR: { MARKETING_CLOUD_ORG_ID: &#39;experience cloud ID&#39;, TRACKING_SERVER: &#39;tracking server&#39;, DPID: &#39;&#39;, DPUUID: &#39;&#39; }, APP_MEASUREMENT: { RSID: &#39;Report Suite-ID&#39;, TRACKING_SERVER: &#39;tracking server&#39;, PAGE_NAME: &#39;page name&#39;, CHAR_SET: &#39;UTF-8&#39; }, HEARTBEAT: { TRACKING_SERVER: &#39;Heartbeat tracking server&#39;, PUBLISHER: &#39;publisher id&#39;, KANAL: &#39;channel&#39;, OVP: &#39;ovp name&#39;, SDK: &#39;sgk version&#39;, SSL: &#39;false&#39;, DEBUG: &#39;true&#39; } }; })();



<b>SCHRITT 4: Hinzufügen von Aktionen Besucher-ID-Dienst</b>

Media Analytics benötigt eine Instanz des Besucher-ID-Service. Sie müssen den Besucher-ID-Dienst-Code aus dem Code-Manager in der Adobe Analytics-Benutzeroberfläche herunterladen.

Nachdem Sie den Code des Besucher-ID-Diensts heruntergeladen haben, klicken Sie unter &quot;Aktionen&quot;auf die Schaltfläche + , um ein neues Aktionselement zu erstellen, und

1. Wählen Sie &quot;Core&quot;aus der Dropdown-Liste Erweiterung aus.
2. Wählen Sie &quot;Benutzerspezifischer Code&quot;aus der Dropdown-Liste Aktionstyp aus.
3. Fügen Sie im Textfeld &quot;Name&quot;einen Aktionsnamen hinzu.
4. Wählen Sie &quot;Javascript&quot;unter &quot;Sprache&quot;.
5. Aktivieren Sie &quot;Global ausführen&quot;.
6. Klicken Sie auf &quot;Editor öffnen&quot;.
7. Fügen Sie unten den folgenden Code hinzu und klicken Sie auf &quot;Speichern&quot;.
8. Fügen Sie unten den folgenden Code hinzu und klicken Sie auf &quot;Speichern&quot;.


var visitor = Visitor.getInstance(&quot;Experience Cloud ID&quot;, { trackingServer: &quot;tracking server&quot;, // identisch mit s.trackingServer trackingServerSecure: &quot; tracking server &quot; // derselbe wie s.trackingServerSecure });

<b>SCHRITT 5: Aktionen hinzufügen - AppMeasurement-Code</b>

Media Analytics benötigt eine Instanz von AppMeasurement. Sie müssen es über den Code-Manager in der Adobe Analytics-Benutzeroberfläche herunterladen.

Nachdem Sie den AppMeasurement-Code heruntergeladen haben, klicken Sie unter &quot;Aktionen&quot;auf die Schaltfläche + , um ein neues Aktionselement zu erstellen, und

1. Wählen Sie &quot;Core&quot;aus der Dropdown-Liste Erweiterung aus.
2. Wählen Sie &quot;Benutzerspezifischer Code&quot;aus der Dropdown-Liste Aktionstyp aus.
3. Fügen Sie im Textfeld &quot;Name&quot;einen Aktionsnamen hinzu.
4. Wählen Sie &quot;Javascript&quot;unter &quot;Sprache&quot;.
5. Aktivieren Sie &quot;Global ausführen&quot;.
6. Klicken Sie auf &quot;Editor öffnen&quot;.
7. Fügen Sie den Besucher-ID-Dienst-Code hinzu.
8. Fügen Sie oben den folgenden Code hinzu und klicken Sie auf &quot;Speichern&quot;.

<br><br><br>// AppMeasurement initialisieren
<br>var s_account=&quot;Report Suite-ID&quot;
<br>var s=s_gi(s_account)
<br>/\*\*\*\*\*\*\*\* BESUCHER-ID-DIENSTKONFIGURATION - ERFORDERT VisitorAPI.js \*\*\*\*\*\*\*/
<br>s.visitor=Visitor.getInstance(&quot;Experience Cloud ID&quot;)<br><br><br>
<b>SCHRITT 6: Aktionen hinzufügen - Heartbeat-Code</b>

Heartbeat SDK herunterladen von [https://github.com/Adobe-Marketing-Cloud/media-sdks/tree/master/sdks/js/libs](https://github.com/Adobe-Marketing-Cloud/media-sdks/tree/master/sdks/js/libs).

Nachdem Sie den Heartbeat-Code heruntergeladen haben, klicken Sie unter &quot;Aktionen&quot;auf die Schaltfläche + , um ein neues Aktionselement zu erstellen, und

1. Wählen Sie &quot;Core&quot;aus der Dropdown-Liste Erweiterung aus.
2. Wählen Sie &quot;Benutzerspezifischer Code&quot;aus der Dropdown-Liste Aktionstyp aus.
3. Fügen Sie im Textfeld &quot;Name&quot;einen Aktionsnamen hinzu.
4. Wählen Sie &quot;Javascript&quot;unter &quot;Sprache&quot;.
5. Aktivieren Sie &quot;Global ausführen&quot;.
6. Klicken Sie auf &quot;Editor öffnen&quot;.
7. Fügen Sie den Besucher-ID-Dienst-Code hinzu.
8. Fügen Sie unten den folgenden Code hinzu und klicken Sie auf &quot;Speichern&quot;.


//Erstellen Sie einen lokalen Verweis auf die MediaHeartbeat-Klassen

var MediaHeartbeat = ADB.va.MediaHeartbeat; var MediaHeartbeatConfig = ADB.va.MediaHeartbeatConfig; var MediaHeartbeatDelegate = ADB.va.MediaHeartbeatDelegate;

//Media Heartbeat-Initialisierung

var mediaConfig = new MediaHeartbeatConfig(); mediaConfig.trackingServer = Configuration.HEARTBEAT.TRACKING_SERVER; mediaConfig.playerName = Configuration.PLAYER.NAME; mediaConfig.channel = Configuration.HEARTBEAT.CHANNEL; mediaConfig.debugLogging = Configuration.HEARTBEAT.DEBUG;

mediaConfig.appVersion = Configuration.HEARTBEAT.SDK; mediaConfig.ssl = Configuration.HEARTBEAT.SDK; mediaConfig.ovp = Configuration.HEARTBEAT.OVP;

// Implementieren Sie das MediaHeartbeatDelegate-Protokoll.
var mediaDelegate = new MediaHeartbeatDelegate();

// Initialisieren

var appMeasurement = new AppMeasurement(); appMeasurement.visitor = visitor; appMeasurement.trackingServer = Configuration.APP_MEASUREMENT.TRACKING_SERVER; appMeasurement.account = Configuration.APP_MEASUREMENT.RSID; appMeasurement.pageName = Configuration.APP_MEASUREMENT.PAGE_NAME; appMeasurement.charSet = Configuration.APP_MEASUREMENT.CHAR_SET; var contextData = { pageURL: document.URL, isUserLoggedIn: &quot;false&quot;, tvStation: &quot;Sample TV station&quot;, Programmierer: &quot;Khurshid Alam&quot; }; var mediaInfo; var videostarted = false; var metaDataLoaded = false;



<b>SCHRITT 7: Aktionen hinzufügen - YouTube IFrame-API-Code</b>

1. Wählen Sie &quot;Core&quot;aus der Dropdown-Liste Erweiterung aus.
2. Wählen Sie &quot;Benutzerspezifischer Code&quot;aus der Dropdown-Liste Aktionstyp aus.
3. Fügen Sie im Textfeld &quot;Name&quot;einen Aktionsnamen hinzu.
4. Wählen Sie &quot;Javascript&quot;unter &quot;Sprache&quot;.
5. Aktivieren Sie &quot;Global ausführen&quot;.
6. Klicken Sie auf &quot;Editor öffnen&quot;.
7. Fügen Sie den folgenden Code hinzu und klicken Sie auf &quot;Speichern&quot;.


// 2. Dieser Code lädt den IFrame Player-API-Code asynchron.

var tag = document.createElement(&#39;script&#39;); tag.src = &quot;https://www.youtube.com/iframe_api&quot;; var firstScriptTag = document.getElementsByTagName(&#39;script&#39;)0; firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

// 3. Diese Funktion erstellt einen iframe (und YouTube-Player) // nach dem Herunterladen des API-Codes.

var player; function onYouTubeIframeAPIReady() { console.log(&quot;onYouTubeIframeAPIReady call...&quot;);        player = new YT.Player(&#39;player&#39;, { height: &quot;390&quot;, Breite: &quot;640&quot;, videoId: &quot;xWYHvIjvMnY&quot;, Ereignisse: { &#39;onReady&#39;: onPlayerReady, &#39;onStateChange&#39;: onPlayerStateChange, &#39;onPlaybackQualityChange&#39;: onPlayerPlaybackQualityChange, &#39;onPlaybackRateChange&#39;: onPlayerPlaybackRateChange, &#39;onError&#39;: onPlayerError }); }

// 4. Die API ruft diese Funktion auf, wenn der Videoplayer bereit ist.

function onPlayerReady(event) { metaDataLoaded = true;        player.playVideo(); }

// 5. Die API ruft diese Funktion auf, wenn sich der Status des Players ändert.
// Die Funktion gibt an, dass bei der Wiedergabe eines Videos (Status = 1) // der Player sechs Sekunden lang wiedergegeben und dann angehalten werden soll.

function onPlayerStateChange(event) { switch (event.data){ case YT.PlayerState.PLAYING:  console.log(&quot;\*\*\*HB Playing&quot;);                      if(metaDataLoaded){ if (Math.floor(event.target.getCurrentTime()) == 0) { console.log(&quot;\*\*\*HB Start&quot;);                                    MediaHeartbeat = ADB.va.MediaHeartbeat;                                    mediaInfo = MediaHeartbeat.createMediaObject( event.target.getVideoData().title, event.target.getVideoData().video_id, Math.floor(event.target.getDuration()), MediaHeartbeat.StreamType.VOD );                                     MediaHeartbeat = new MediaHeartbeat(mediaDelegate, mediaConfig, appMeasurement);                                    mediaDelegate.getCurrentPlaybackTime = function() { return Math.floor(event.target.getCurrentTime());                            };                                    MediaHeartbeat.trackSessionStart(mediaInfo, contextData);                                    MediaHeartbeat.trackPlay();                                    videostarted = true;                      } else { console.log(&quot;\*\*\*HB Play&quot;);                            MediaHeartbeat.trackPlay();                      }} break;               Case YT.PlayerState.PAUSED:                      console.log(&quot;\*\*\*HB Pause&quot;);                      MediaHeartbeat.trackPause();                      Bruch;               Case YT.PlayerState.ENDED:                      console.log(&quot;\*\*\*HB Ended&quot;);                      MediaHeartbeat.trackComplete();                      MediaHeartbeat.trackSessionEnd();                      Bruch;               Case -1:                      console.log(&quot;\*\*\*HB Unloaded&quot;);                      MediaHeartbeat.trackComplete();                      MediaHeartbeat.trackSessionEnd();                      Bruch;        }

}

function onPlayerPlaybackQualityChange(event) { console.log(&quot;onPlayerPlaybackQualityChange: event.data: &quot;+ event.data); }

function onPlayerPlaybackRateChange(event) { console.log(&quot;onPlayerPlaybackRateChange: event.data: &quot;+ event.data); }

function onPlayerError(event) { console.log(&quot;onPlayerError: event.data: &quot;+ event.data); }



<b>SCHRITT 8: HTML hinzufügen</b>

Fügen Sie den folgenden Code in Ihren HTML-Code ein.

!-- 1. Der iframe (und Videoplayer) ersetzt dieses div-Tag. — div id=&quot;player&quot;/divbr

<b>SCHRITT 8: Veröffentlichen</b>

Veröffentlichen Sie Ihre Eigenschaft und testen Sie sie.


